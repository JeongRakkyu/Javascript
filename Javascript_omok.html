<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <input type="text" id="stone">
        <button onclick="omokk()">좌표 입력</button>
        <p>* 좌표입력 시 주의사항 : xx,yy의 형태로 입력할 것(ex. 3,5 => 03,05)</p>
        <p id="output"></p>
        <script>
            var s_cnt = 0;
            var stone = "";
            //배열 설정//
            var omok = [];
                for(var i = 0; i < 15; i++) {
                omok[i] = [" □ ", " □ ", " □ ", " □ ", " □ ", " □ ", " □ ", " □ ", " □ ", " □ ", " □ ", " □ ", " □ ", " □ ", " □ ", " □ " + "<br>"];
                }

            function omokk() {
                //좌표 변수 : coordinate(인풋창 string), x(행좌표), y(열좌표)//
                var coordinate = document.getElementById("stone").value;
                var x = parseInt(coordinate.charAt(0) + coordinate.charAt(1));
                var y = parseInt(coordinate.charAt(3) + coordinate.charAt(4));
                var x2 = x;                                             //승리판별시 사용될 x임시저장변수//
                var y2 = y;                                             //승리판별시 사용될 y임시저장변수//

                //중복좌표 입력 방지//
                if (omok[x][y] === stone) {
                    window.alert(stone + "과 동일한 위치입니다. 다시 좌표를 입력해주세요.")
                } else {
                    if (s_cnt % 2 === 0) {
                        stone = " ● ";
                    } else {
                        stone = " ○ ";
                    }
                }
                if(y === 15) {
                    stone = stone + "<br>";                             //열이 15일 경우 한칸 띄어쓰기를 해줘야함(행 이동)//
                }
                console.log(stone);
                console.log(s_cnt);
                omok[x][y] = stone;                                     //돌 입력//
                if(y === 15) {
                    if (s_cnt % 2 === 0) {      //다시 원상복구 시켜야되는데 어째야되니~ 위에 동일한 위치 확인할 때 확인하면된다 (y=15일때 <br>붙여서 비교할 것)//
                        stone = " ● ";
                    } else {
                        stone = " ○ ";
                    }
                }
                console.log(stone);
                console.log(s_cnt);
                s_cnt++;
                //중복좌표 입력 방지 종료//

                while(true) {
                    var cnt_win_1 = 0;
                    var cnt_win_2 = 0;
                    var cnt_win_3 = 0;
                    var cnt_win_4 = 0;
                    var cnt_3x3_1 = 0;
                    var cnt_3x3_2 = 0;
                    var cnt_3x3_3 = 0;
                    var cnt_3x3_4 = 0;
                    //상하 승리확인//
                    for(var i = 1; i < 16; i++) {
                        if(x - i < 0) {
                            break;
                        } else {
                            if(omok[x][y] === omok[x - i][y]) {
                                cnt_win_1++;
                                cnt_3x3_1++;
                            } else {
                                break;
                            }
                        }
                    }

                    for(var i = 1; i < 16; i++) {
                        if(x + i > 15) {
                            break;
                        } else {
                            if(omok[x][y] === omok[x + i][y]) {
                                cnt_win_1++;
                                cnt_3x3_1++;
                            } else {
                                break;
                            }
                        }
                    }

                    //좌우 승리확인//
                    for(var i = 1; i < 16; i++) {
                        if(y - i < 0) {
                            break;
                        } else {
                            if(omok[x][y] === omok[x][y - i]) {
                                cnt_win_2++;
                                cnt_3x3_2++;
                            } else {
                                break;
                            }
                        }
                    }

                    for(var i = 1; i < 16; i++) {
                        if(y + i > 15) {
                            break;
                        } else {
                            if(omok[x][y] === omok[x][y + i]) {
                                cnt_win_2++;
                                cnt_3x3_2++;
                            } else {
                                break;
                            }
                        }
                    }

                    //좌상우하 승리확인//
                    for(var i = 1; i < 16; i++) {
                        if(x - i < 0 || y - i < 0) {
                            break;
                        } else {
                            if(omok[x][y] === omok[x - i][y - i]) {
                                cnt_win_3++;
                                cnt_3x3_3++;
                            } else {
                                break;
                            }
                        }
                    }

                    for(var i = 1; i < 16; i++) {
                        if(x + i > 15 || y + i > 15) {
                            break;
                        } else {
                            if(omok[x][y] === omok[x + i][y + i]) {
                                cnt_win_3++;
                                cnt_3x3_3++;
                            } else {
                                break;
                            }
                        }
                    }

                    //우상좌하 승리확인//
                    for(var i = 1; i < 16; i++) {
                        if(x - i < 0 || y + i > 15) {
                            break;
                        } else {
                            if(omok[x][y] === omok[x - i][y + i]) {
                                cnt_win_4++;
                                cnt_3x3_4++;
                            } else {
                                break;
                            }
                        }
                    }

                    for(var i = 1; i < 16; i++) {
                        if(x + i > 15 || y - i < 0) {
                            break;
                        } else {
                            if(omok[x][y] === omok[x + i][y - i]) {
                                cnt_win_4++;
                                cnt_3x3_1++;
                            } else {
                                break;
                            }
                        }
                    }
                    
                                        
                    var output = "";
                    for(var row = 0; row < 16; row++) {
                        for(var col = 0; col < 16; col++) {
                            output = output + omok[row][col];
                        }
                    }
                    document.getElementById("output").innerHTML = output;

                    //삼삼확인//
                    if(cnt_3x3_1 === 2 && cnt_3x3_2 !== 2 && cnt_3x3_3 !== 2 && cnt_3x3_4 !== 2) {
                    } else if(cnt_3x3_1 !== 2 && cnt_3x3_2 === 2 && cnt_3x3_3 !== 2 && cnt_3x3_4 !== 2){
                    } else if(cnt_3x3_1 !== 2 && cnt_3x3_2 !== 2 && cnt_3x3_3 === 2 && cnt_3x3_4 !== 2){
                    } else if(cnt_3x3_1 !== 2 && cnt_3x3_2 !== 2 && cnt_3x3_3 !== 2 && cnt_3x3_4 === 2){
                    } else if(cnt_3x3_1 !== 2 && cnt_3x3_2 !== 2 && cnt_3x3_3 !== 2 && cnt_3x3_4 !== 2){
                    } else {
                        omok[x][y] = " □ ";
                        window.alert(stone + "삼삼입니다. 다시 좌표를 입력해주세요.");
                        output = "";
                        for(var row = 0; row < 16; row++) {
                            for(var col = 0; col < 16; col++) {
                                output = output + omok[row][col];
                            }
                        }
                        document.getElementById("output").innerHTML = output;
                        break;
                    }

                    if(cnt_win_1 === 4) {
                        window.alert(stone + "W I N !");
                        break;
                    } else if(cnt_win_2 === 4) {
                        window.alert(stone + "W I N !");
                        break;
                    } else if(cnt_win_3 === 4) {
                        window.alert(stone + "W I N !");
                        break;
                    } else if(cnt_win_4 === 4) {
                        window.alert(stone + "W I N !");
                        break;
                    } else {
                        break;
                    }
                }
            }

        </script>
    </body>
</html>